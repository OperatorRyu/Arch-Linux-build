/*! For license information please see popup.bundle.js.LICENSE.txt */
(()=>{"use strict";var e,t={2921:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=s(3940),a=s(7557),n=s(9526),i=s(1353),r=s(4719),l=s(292),c=o.__importDefault(s(6397)),d=o.__importDefault(s(6749)),u=o.__importDefault(s(8289)),g=o.__importDefault(s(5144)),p=s(7190);class b{constructor(){this.cookieCount=0,this.tab=void 0,this.storeId="default"}}class m extends n.Component{constructor(){super(...arguments),this.state=new b,this.port=null}componentDidMount(){return o.__awaiter(this,void 0,void 0,(function*(){document.documentElement.style.fontSize=`${this.props.state.settings.sizePopup.value||16}px`,(0,l.isChrome)(this.props.state.cache)&&(document.documentElement.style.minWidth=430+35*((this.props.state.settings.sizePopup.value||16)-10)+"px");const e=yield browser.tabs.query({active:!0,currentWindow:!0});this.setState({storeId:(0,l.parseCookieStoreId)(this.props.contextualIdentities,e[0].cookieStoreId),tab:e[0]})}))}componentWillUnmount(){this.port&&(this.port.disconnect(),this.port=null)}setPopupCookieCount(){return o.__awaiter(this,void 0,void 0,(function*(){const{state:e}=this.props,{tab:t}=this.state;if(!t||!t.url)return;const s=yield(0,l.getAllCookiesForDomain)(e,t);this.setState({cookieCount:s?s.length-s.filter((e=>e.name===l.CADCOOKIENAME)).length:0})}))}render(){const{tab:e,storeId:t}=this.state;if(!e)return"Loading";const{onNewExpression:s,onCookieCleanup:o,onUpdateSetting:n,contextualIdentities:i,state:r}=this.props,{cache:b,settings:m}=r,x=(0,l.getHostname)(e.url),f=(0,l.extractMainDomain)(x),h=[x===f?void 0:`*.${f}`,x].filter(Boolean);return""===x||(0,l.isAnIP)(e.url)||x.startsWith("file:")||h.push(`*.${x}`),this.port||x&&(this.port=browser.runtime.connect({name:`popupCAD_${x},${t.replace(",","-")}`}),this.port.onMessage.addListener((e=>{const t=e;void 0!==t.cookieUpdated&&t.cookieUpdated&&this.setPopupCookieCount()})),this.port.onDisconnect.addListener((e=>{e.error&&console.error(`Disconnected due to an error: ${browser.runtime.lastError}`),this.port=null}))),(0,a.jsxs)("div",Object.assign({id:"cadPopup",className:"container-fluid",style:{overflow:"auto"},onClick:e=>{const t=e.target,s=document.getElementById("cleanCollapse");if(!s||!s.classList.contains("show"))return;const o=t.attributes.getNamedItem("data-target");o&&"#cleanCollapse"===o.value||s.classList.remove("show")}},{children:[(0,a.jsxs)("div",Object.assign({className:"row pt-2",style:{alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.05)",justifyContent:"center"}},{children:[(0,a.jsx)("span",Object.assign({id:"CADTitle"},{children:browser.i18n.getMessage("extensionName")}))," ",(0,a.jsx)("span",Object.assign({id:"CADVersion",style:{fontWeight:"bold"}},{children:browser.runtime.getManifest().version}))]})),(0,a.jsxs)("div",Object.assign({className:"row justify-content-center p-1",style:{alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.05)",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"}},{children:[(0,a.jsx)(d.default,{iconName:"power-off",className:`btn-${m.activeMode.value?"success":"danger"} m-1`,onClick:()=>n(Object.assign(Object.assign({},m.activeMode),{value:!m.activeMode.value})),title:m.activeMode.value?browser.i18n.getMessage("disableAutoDeleteText"):browser.i18n.getMessage("enableAutoDeleteText"),text:m.activeMode.value?browser.i18n.getMessage("autoDeleteEnabledText"):browser.i18n.getMessage("autoDeleteDisabledText")}),(0,a.jsx)(d.default,{iconName:m.showNotificationAfterCleanup.value?"bell":"bell-slash",className:`btn-${m.showNotificationAfterCleanup.value?"success":"danger"} m-1`,onClick:()=>n(Object.assign(Object.assign({},m.showNotificationAfterCleanup),{value:!m.showNotificationAfterCleanup.value})),title:browser.i18n.getMessage("toggleNotificationText"),text:m.showNotificationAfterCleanup.value?browser.i18n.getMessage("notificationEnabledText"):browser.i18n.getMessage("notificationDisabledText")}),(0,a.jsxs)("div",Object.assign({id:"cleanButtonContainer",className:"btn-group m-1",role:"group","aria-label":"Clean Actions Group"},{children:[(0,a.jsx)(d.default,{iconName:"eraser",className:"btn-warning",type:"button",onClick:()=>{o({greyCleanup:!1,ignoreOpenTabs:!1}),(0,p.animateFlash)(document.getElementById("cleanButtonContainer"),!0)},title:browser.i18n.getMessage("cookieCleanupText"),text:browser.i18n.getMessage("cleanText")}),(0,a.jsx)("button",Object.assign({"aria-controls":"cleanCollapse","aria-expanded":"false",className:"btn btn-warning dropdown-toggle dropdown-toggle-split","data-disabled":"true","data-target":"#cleanCollapse","data-toggle":"collapse",role:"button",style:{borderLeftColor:"rgb(176, 132, 0)",transform:"translate3d(-3px, 0px, 0px)"}},{children:(0,a.jsx)("span",Object.assign({className:"sr-only"},{children:browser.i18n.getMessage("dropdownAdditionalCleaningOptions")}))}))]})),(0,a.jsx)(d.default,{iconName:"cog",className:"btn-info m-1",onClick:()=>{(0,l.isFirefoxNotAndroid)(b)?browser.tabs.create({cookieStoreId:e.cookieStoreId,index:e.index+1,url:"/settings/settings.html#tabSettings"}):browser.tabs.create({index:e.index+1,url:"/settings/settings.html#tabSettings"}),window.close()},title:browser.i18n.getMessage("preferencesText"),text:browser.i18n.getMessage("preferencesText")})]})),(0,a.jsx)(u.default,{hostname:x||"",tab:e}),(0,a.jsxs)("div",Object.assign({className:"row no-gutters",style:{alignItems:"center",margin:"8px 0"}},{children:[e.favIconUrl&&!e.favIconUrl.startsWith("chrome:")&&(0,a.jsx)("img",{alt:"favIcon",src:e.favIconUrl,style:{height:"20px",marginRight:"7px",verticalAlign:"middle",width:"20px"}}),(0,a.jsx)("div",Object.assign({className:"col"},{children:(0,a.jsx)("span",Object.assign({style:{fontSize:"1.25em",marginRight:"8px",verticalAlign:"middle"}},{children:`${x}${i&&void 0!==b[t]?` (${b[t]})`:""}`}))})),(0,a.jsxs)("div",Object.assign({className:"col-3",style:{fontSize:"1.1em",textAlign:"center"}},{children:[(0,a.jsx)("span",Object.assign({id:"CADCookieText"},{children:browser.i18n.getMessage("popupCookieCountText")})),": ",(0,a.jsx)("span",Object.assign({id:"CADCookieCount",style:{fontWeight:"bold"}},{children:this.state.cookieCount}))]}))]})),h.map((e=>(0,a.jsxs)("div",Object.assign({style:{alignItems:"center",display:"flex",margin:"8px 0"},className:"row"},{children:[(0,a.jsx)("div",Object.assign({style:{flex:1}},{children:e})),(0,a.jsxs)("div",Object.assign({className:"btn-group",style:{marginLeft:"8px"}},{children:[(0,a.jsx)(d.default,{className:"btn-secondary",onClick:()=>{s({expression:(0,l.localFileToRegex)(e),listType:"GREY",storeId:t})},iconName:"plus",title:browser.i18n.getMessage("toGreyListText"),text:browser.i18n.getMessage("greyListWordText")}),(0,a.jsx)(d.default,{className:"btn-primary",onClick:()=>{s({expression:(0,l.localFileToRegex)(e),listType:"WHITE",storeId:t})},iconName:"plus",title:browser.i18n.getMessage("toWhiteListText"),text:browser.i18n.getMessage("whiteListWordText")})]}))]}),e))),(0,a.jsx)("div",Object.assign({className:"row",style:{margin:"8px 0"}},{children:(0,a.jsx)(g.default,{url:x,storeId:t})})),(0,a.jsx)(c.default,{numberToShow:3,decisionFilter:1})]}))}}t.default=(0,i.connect)((e=>({contextualIdentities:(0,l.getSetting)(e,"contextualIdentities"),state:e})),(e=>({onUpdateSetting(t){e((0,r.updateSetting)(t))},onNewExpression(t){e((0,r.addExpressionUI)(t))},onCookieCleanup(t){e((0,r.cookieCleanupUI)(t))}})))(m)},8289:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=s(3940),a=s(7557),n=s(1353),i=s(4719),r=s(7459),l=o.__importDefault(s(753));t.default=(0,n.connect)((e=>({state:e})),(e=>({onCookieCleanup(t){e((0,i.cookieCleanupUI)(t))}})))((e=>{const{hostname:t,tab:s,state:n,onCookieCleanup:i}=e;return(0,a.jsx)("div",Object.assign({className:"row justify-content-center collapse",id:"cleanCollapse",role:"group",style:{alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.05)",borderBottom:"1px solid rgba(0, 0, 0, 0.1)",padding:"4px 4px 8px 4px"}},{children:(0,a.jsxs)("div",Object.assign({className:"btn-group-vertical"},{children:[(0,a.jsx)(l.default,{btnColor:"btn-warning",onClick:()=>o.__awaiter(void 0,void 0,void 0,(function*(){return i({greyCleanup:!1,ignoreOpenTabs:!0}),!0})),title:browser.i18n.getMessage("cookieCleanupIgnoreOpenTabsText"),text:browser.i18n.getMessage("cleanIgnoringOpenTabsText")}),(0,a.jsx)("button",Object.assign({"aria-disabled":!0,className:"px-2 btn btn-light btn-block text-danger font-weight-bold",disabled:!0,type:"button"},{children:browser.i18n.getMessage("cleanupActionsBypass")})),(0,a.jsx)(l.default,{siteData:"All",hostname:t,tab:s}),(0,a.jsx)(l.default,{altColor:!0,siteData:"Cache",hostname:t}),(0,a.jsx)(l.default,{onClick:()=>o.__awaiter(void 0,void 0,void 0,(function*(){return yield(0,r.clearCookiesForThisDomain)(n,s)})),title:browser.i18n.getMessage("manualCleanSiteDataCookiesDomain",[t]),text:browser.i18n.getMessage("manualCleanSiteDataCookies")}),(0,a.jsx)(l.default,{altColor:!0,siteData:"IndexedDB",hostname:t}),(0,a.jsx)(l.default,{onClick:()=>o.__awaiter(void 0,void 0,void 0,(function*(){return yield(0,r.clearLocalStorageForThisDomain)(n,s)})),siteData:"LocalStorage",hostname:t}),(0,a.jsx)(l.default,{altColor:!0,siteData:"PluginData",hostname:t}),(0,a.jsx)(l.default,{siteData:"ServiceWorkers",hostname:t})]}))}))}))},753:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=s(3940),a=s(7557),n=s(1353),i=s(7459),r=s(7190);t.default=(0,n.connect)((e=>({state:e})))((e=>{const{altColor:t,btnColor:s,hostname:n,onClick:l,siteData:c,state:d,tab:u,title:g,text:p}=e,b=o.__rest(e,["altColor","btnColor","hostname","onClick","siteData","state","tab","title","text"]);return(0,a.jsx)("button",Object.assign({"aria-controls":"cleanCollapse","aria-expanded":"false",className:`btn ${s||"btn-"+(t?"secondary":"primary")} btn-block px-2 mt-1`,"data-target":"#cleanCollapse","data-toggle":"collapse",onClick:()=>o.__awaiter(void 0,void 0,void 0,(function*(){let e=!0;l?e=yield l.apply(this):d&&c&&n&&(e=yield((e,t,s,a)=>o.__awaiter(void 0,void 0,void 0,(function*(){if(!s)return!1;let o=yield(0,i.clearSiteDataForThisDomain)(e,t,s);if("All"===t){if(!a)return!1;const t=yield(0,i.clearCookiesForThisDomain)(e,a),s=yield(0,i.clearLocalStorageForThisDomain)(e,a);o=o||t||s}return o})))(d,c,n,u)),(0,r.animateFlash)(document.getElementById("cleanButtonContainer"),e)})),title:g||c&&n&&browser.i18n.getMessage(`manualCleanSiteData${c}Domain`,[n])||"",type:"button"},b,{children:p||browser.i18n.getMessage(`manualCleanSiteData${c}`)}))}))},5144:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=s(3940),a=s(7557),n=s(1353),i=s(292),r=o.__importDefault(s(3382));t.default=(0,n.connect)(((e,t)=>({expressions:(0,i.getMatchedExpressions)(e.lists,t.storeId,t.url)})))((e=>{const{expressions:t,storeId:s}=e;return(0,a.jsx)(r.default,{expressionColumnTitle:browser.i18n.getMessage("matchedDomainExpressionText"),expressions:t,storeId:s,emptyElement:(0,a.jsx)("span",Object.assign({style:{fontStyle:"italic",width:"100%"}},{children:(0,a.jsx)("div",Object.assign({className:"alert alert-primary",role:"alert",style:{marginBottom:0}},{children:(0,a.jsx)("i",{children:browser.i18n.getMessage("noRulesText")})}))}))})}))},7325:(e,t,s)=>{const o=s(3940),a=s(7557),n=o.__importDefault(s(3961)),i=s(1353),r=s(9477),l=s(292),c=o.__importDefault(s(877)),d=o.__importDefault(s(5461)),u=o.__importDefault(s(2921));(0,d.default)(),function(){o.__awaiter(this,void 0,void 0,(function*(){let e=yield(0,r.createUIStore)();for(;!e.getState();)yield(0,l.sleep)(250),e=yield(0,r.createUIStore)();const t=document.createElement("div");document.body.appendChild(t),(0,l.isChrome)(e.getState().cache)&&(yield new Promise((e=>setTimeout(e,100)))),n.default.render((0,a.jsx)(i.Provider,Object.assign({store:e},{children:(0,a.jsx)(c.default,{children:(0,a.jsx)(u.default,{})})})),t)}))}()},7190:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.animateFlash=void 0,t.animateFlash=(e,t)=>{if(e)try{const s=(t?"success":"failure")+"Animated";e.classList.add(s),setTimeout((()=>{e.classList.remove(s)}),1500)}catch(e){}}},9477:e=>{e.exports=ReduxWebExt}},s={};function o(e){var a=s[e];if(void 0!==a)return a.exports;var n=s[e]={exports:{}};return t[e].call(n.exports,n,n.exports,o),n.exports}o.m=t,e=[],o.O=(t,s,a,n)=>{if(!s){var i=1/0;for(d=0;d<e.length;d++){for(var[s,a,n]=e[d],r=!0,l=0;l<s.length;l++)(!1&n||i>=n)&&Object.keys(o.O).every((e=>o.O[e](s[l])))?s.splice(l--,1):(r=!1,n<i&&(i=n));if(r){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[s,a,n]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={42:0,352:0,314:0};o.O.j=t=>0===e[t];var t=(t,s)=>{var a,n,[i,r,l]=s,c=0;if(i.some((t=>0!==e[t]))){for(a in r)o.o(r,a)&&(o.m[a]=r[a]);if(l)var d=l(o)}for(t&&t(s);c<i.length;c++)n=i[c],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(d)},s=self.webpackChunkcookie_autodelete=self.webpackChunkcookie_autodelete||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var a=o.O(void 0,[481,94],(()=>o(7325)));a=o.O(a)})();